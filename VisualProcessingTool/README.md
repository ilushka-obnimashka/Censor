# Media Processing Tool

Этот инструмент предназначен для обработки медиа файлов с применением фильтров для скрытия определенных объектов или лиц на изображениях и видео.

## Установка

Перед использованием убедитесь, что у вас установлен Python 3.6+ и библиотеки, указанные в `requirements.txt`. Если файл не предоставлен, вы можете установить необходимые зависимости вручную с помощью:

```bash
pip install -r requirements.txt
```

Также убедитесь, что модели для обработки медиа находятся в папке `models` в той же директории, что и ваш скрипт. Эти модели загружаются отдельно. Все необходимые модели должны быть помещены в папку `models`.

## Использование

### Основная команда

```bash
python detect_and_blur.py parse <input_path> --black-list <class1> --black-list <class2> ... [OPTIONS]
```

### Аргументы и параметры:

- **input_path** (обязательный): Путь к входному файлу, который требуется обработать. Должен существовать на диске.
  
- **--black-list, -b** (обязательный): Список классов для блюра. Укажите один или несколько классов объектов, которые необходимо скрыть. Например:

```bash
--black-list cigarette --black-list MALE_GENITALIA_EXPOSED
```

Доступны только определенные классы:

```bash
lables = [
    "cigarette",
    
    "FEMALE_GENITALIA_COVERED",
    "FACE_FEMALE",
    "BUTTOCKS_EXPOSED",
    "FEMALE_BREAST_EXPOSED",
    "FEMALE_GENITALIA_EXPOSED",
    "MALE_BREAST_EXPOSED",
    "ANUS_EXPOSED",
    "FEET_EXPOSED",
    "BELLY_COVERED",
    "FEET_COVERED",
    "ARMPITS_COVERED",
    "ARMPITS_EXPOSED",
    "FACE_MALE",
    "BELLY_EXPOSED",
    "MALE_GENITALIA_EXPOSED",
    "ANUS_COVERED",
    "FEMALE_BREAST_COVERED",
    "BUTTOCKS_COVERED",
    
    'lgbt',
    'svastika'
]
```

- **--pixelation/--no-pixelation** (по умолчанию: включено): Указывает, нужно ли применить пикселизацию для скрытых объектов. Если опция отключена, будет применяться контур.

- **--output-path, -o** (необязательный): Путь к выходному файлу, в который будет сохранен результат обработки. Если не указано, результат будет сохранен в том же месте, что и исходный файл, с добавленным суффиксом.

- **--show** (необязательный): Параметр для отображения результата в реальном времени (только для разработчиков). Эта опция скрыта по умолчанию и не должна использоваться в обычной работе.

### Пример использования:

1. Обработка изображения с применением блюра для скрытия сигареты и гениталий, результат сохраняется в новый файл:
```bash
python detect_and_blur.py parse /path/to/input_image.jpg --black-list cigarette --black-list MALE_GENITALIA_EXPOSED --output-path /path/to/output_image.jpg
```

2. Обработка видео с пикселизацией:
```bash
python detect_and_blur.py parse /path/to/input_video.mp4 --black-list cigarette --pixelation --output-path /path/to/output_video.mp4
```

## Примечания

- Фильтрация работает в соответствии с заранее определенными классами. Перед использованием убедитесь, что список классов соответствует вашим данным.

- Если вы хотите запустить приложение для видео или изображений в реальном времени для проверки промежуточных результатов, используйте флаг --show.